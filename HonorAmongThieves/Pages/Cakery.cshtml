@page
@model HonorAmongThieves.Pages.CakeryModel
<title>CAKERY</title>
<div class="container">
    @await Html.PartialAsync("_GameLobby")
    @await Html.PartialAsync("Lobbies/_CakeryLobby", Model)

    <div class="state" id="pregame" style="text-align:center">
        <hr />
        <h4 class="display-4"><a href="CakeryInstructions.html" target="_blank" rel="noopener noreferrer">Instructions</a></h4>
        <hr />
        <h2><u>Existing Lobbies</u></h2>
        @{
            <table border="1">
                <th>Room ID</th>
                <th>Updated Time</th>
                <th>Player Count</th>
                @foreach (var heistGame in Model.CakeryRooms)
                {
                    <tr>
                        <th>@heistGame.Item1</th>
                        <th>@heistGame.Item2.ToString()</th>
                        <th>@heistGame.Item3.ToString()</th>
                        <th>@heistGame.Item4.ToString()</th>
                    </tr>
                }
            </table>
            <br />
        }
    </div>

    <!----- COMMON HEADER FOR MENU ----->
    <div style="text-align:center; display:none" class="state commonmenubutton display-3">
        <div id="currentyear" class="h3"></div>
        <input type="button" id="switchtogroceryviewbutton" value="SHOP" />
        <input type="button" id="switchtobakeviewbutton" value="BAKE" />
        <input type="button" id="switchtoupgradeviewbutton" value="UPGRADE" />
        <input type="button" id="switchtouseupgradeviewbutton" value="USE" />
        <hr />

        <!---- The resources for current player --->
        <table align="center" class="h2" border="1px solid black" cellpadding="3%">
            <tr>
                <td id="moneyowned2" colspan="4"></td>
            </tr>
            <th></th>
            <th>Owned</th>
            <th></th>
            <th>Baked</th>
            </tr>
            <tr>
                <td>Butter</td>
                <td id="butterowned2"></td>
                <td>Cookies</td>
                <td id="cookiesbaked2"></td>
            </tr>
            <tr>
                <td>Flour</td>
                <td id="flourowned2"></td>
                <td>Croissants</td>
                <td id="croissantsbaked2"></td>
            </tr>
            <tr>
                <td>Sugar</td>
                <td id="sugarowned2"></td>
                <td>Cakes</td>
                <td id="cakesbaked2"></td>
            </tr>
        </table> <hr />
    </div>

    <!------ BUY GROCERIES --------->
    <div class="state" id="buyingredients" style="display:none">
        <div class="display-4" style="text-align:center">
            <table align="center" class="h2" border="1px solid black" cellpadding="3%" style="text-align:center">
                <tr>
                    <th></th>
                    <th>Price/1000g</th>
                    <th>Amount</th>
                </tr>
                <tr>
                    <td>Butter</td>
                    <td id="butterprice"></td>
                    <td> <input type="number" step="0.1" min="0" max="9999" placeholder="0.0" id="buybutteramount" /> </td>
                </tr>
                <tr>
                    <td>Flour</td>
                    <td id="flourprice"></td>
                    <td> <input type="number" step="0.1" min="0" max="9999" placeholder="0.0" id="buyflouramount" /> </td>
                </tr>
                <tr>
                    <td>Sugar</td>
                    <td id="sugarprice"></td>
                    <td> <input type="number" step="0.1" min="0" max="9999" placeholder="0.0" id="buysugaramount" /> </td>
                </tr>
                <tr>
                    <td>Cost</td>
                    <td id="ingredientcost" colspan="3"></td>
                </tr>
                <tr>
                    <td colspan="3"><input type="button" id="buyingredientsbutton" value="BUY INGREDIENTS" class="display-4" /></td>
                </tr>
            </table>
        </div>
    </div>

    <!------ BAKE THINGS --------->
    <div class="state" id="bakegoods" style="display:none">
        <div class="display-4" style="text-align:center">
            <table align="center" class="h2" border="1px solid black" cellpadding="3%" style="text-align:center">
                <tr>
                    <th></th>
                    <th>Butter</th>
                    <th>Flour</th>
                    <th>Sugar</th>
                    <th>Amount</th>
                    <th>
                        Estimated
                        Revenue
                    </th>
                </tr>
                <tr>
                    <td>Cookie</td>
                    <td id="cookiepricebutter"></td>
                    <td id="cookiepriceflour"></td>
                    <td id="cookiepricesugar"></td>
                    <td><input type="number" step="1" min="0" max="9999" placeholder="0" id="bakecookiesamount" /></td>
                    <td id="cookierevenue"></td>
                </tr>
                <tr>
                    <td>Croissant</td>
                    <td id="croissantpricebutter"></td>
                    <td id="croissantpriceflour"></td>
                    <td id="croissantpricesugar"></td>
                    <td><input type="number" step="1" min="0" max="9999" placeholder="0" id="bakecroissantsamount" /></td>
                    <td id="croissantrevenue"></td>
                </tr>
                <tr>
                    <td>Cake</td>
                    <td id="cakepricebutter"></td>
                    <td id="cakepriceflour"></td>
                    <td id="cakepricesugar"></td>
                    <td><input type="number" step="1" min="0" max="9999" placeholder="0" id="bakecakesamount" /></td>
                    <td id="cakerevenue"></td>
                </tr>
                <tr>
                    <td>Total</td>
                    <td id="butterforbaking"></td>
                    <td id="flourforbaking"></td>
                    <td id="sugarforbaking"></td>
                </tr>
                <tr id="bakingingredientshortage" style="display:none">
                    <td>Shortage</td>
                    <td id="bakingbuttershortage" style="color:red">a</td>
                    <td id="bakingflourshortage" style="color:red">b</td>
                    <td id="bakingsugarshortage" style="color:red">c</td>
                </tr>
                <tr>
                    <td colspan="5"><input type="button" id="bakethingsbutton" value="BAKE THINGS" class="display-4" /></td>
                </tr>
            </table>
        </div>
    </div>

    <!------ BUY UPGRADES --------->
    <div class="state" id="upgrademenu" style="display:none">
        <div class="display-4" style="text-align:center">
            <div id="upgradecredit" class="display-2" style="color:green"></div>
            <table align="center" class="h4" border="1px solid black" cellpadding="3%" style="text-align:center" id="upgradetable">
                <tr>
                    <th colspan="4">BUY UPGRADES</th>
                </tr>
                <tr>
                    <th>Name</th>
                    <th>Cost</th>
                    <th>Description</th>
                    <th>You Have</th>
                    <th>
                        Purchase
                        Amount
                    </th>
                </tr>
            </table>
        </div>
    </div>

    <!------ USE UPGRADES --------->
    <div class="state" id="useupgradesmenu" style="display:none">
        <div class="display-4" style="text-align:center">
            <table align="center" class="h4" border="1px solid black" cellpadding="3%" style="text-align:center" id="useupgradetable">
                <tr>
                    <th colspan="5">USE UPGRADES</th>
                </tr>
                <tr>
                    <th>Name</th>
                    <th>Owned</th>
                    <th>
                        Uses
                        Left
                    </th>
                    <th>Cost</th>
                    <th>Gain</th>
                </tr>
            </table>
        </div>
    </div>

    <!----- COMMON FOOTER FOR MENU ----->
    <div style="text-align:center; display:none" class="state commonmenubutton display-1">
        <hr />
        <input type="button" id="endturnbutton" value="END TURN" />
    </div>

    <!------ YOUR MARKET SUMMARY --------->
    <div class="state" id="goodsbaked" style="display:none">
        <div class="display-4" style="text-align:center">
            <div id="currentyearsummary" class="h1"></div>
            <table align="center" class="h2" border="1px solid black" cellpadding="3%">
                <tr>
                    <td colspan="2">To be sold:</td>
                </tr>
                <tr>
                    <th></th>
                    <th>Amount</th>
                </tr>
                <tr>
                    <td>Cookies</td>
                    <td id="cookiesbeingsold"></td>
                </tr>
                <tr>
                    <td>Croissants</td>
                    <td id="croissantsbeingsold"></td>
                </tr>
                <tr>
                    <td>Cakes</td>
                    <td id="cakesbeingsold"></td>
                </tr>
            </table> <hr />

            <div class="h1" style="color:red; text-align:left" id="upgradecreditwarning"></div>
            <div class="h2" style="text-align:left" id="upgradesboughtlistdiv">
                <u>Upgrades Bought:</u>
                <ul id="upgradesboughtlist"></ul>
            </div> <hr />
        </div>
        <div id="confirmationbuttons" class="display-2" style="text-align:center">
            <input type="button" id="gobacktobakeviewbutton" value="BACK" />
        </div>
        <div class="h2" id="readylist">
            <u>Players Ready:</u>
            <ul id="playerreadylist"></ul> <hr />
            <u>Waiting For:</u>
            <ul id="playerwaitinglist"></ul> <hr />
        </div>
    </div>

    <!------ YEAR'S MARKET REPORT --------->
    <div class="state" id="marketreport" style="display:none">
        <div class="display-4" style="text-align:center">
            <div id="marketreportnews" class="h1" style="white-space:pre-line"></div>
            <table align="center" class="h2" border="1px solid black" cellpadding="3%" style="text-align:center" id="marketreporttable">
                <tr>
                    <td colspan="4" id="marketreporttitle"></td>
                </tr>
                <tr>
                    <th>Bakery</th>
                    <th>Cookies</th>
                    <th>Croissants</th>
                    <th>Cakes</th>
                    <th>Revenue</th>
                </tr>
            </table>
            <hr />
            <table align="center" class="h2" border="1px solid black" cellpadding="3%" style="text-align:center">
                <tr>
                    <td colspan="4" id="salestabletitle">Your Sales report</td>
                </tr>
                <tr>
                    <th></th>
                    <th>Price</th>
                    <th>Amount Sold</th>
                    <th>Revenue</th>
                </tr>
                <tr>
                    <td>Cookies</td>
                    <td id="marketreportcookieprice"></td>
                    <td id="marketreportcookieamount"></td>
                    <td id="marketreportcookierevenue"></td>
                </tr>
                <tr>
                    <td>Croissants</td>
                    <td id="marketreportcroissantprice"></td>
                    <td id="marketreportcroissantamount"></td>
                    <td id="marketreportcroissantrevenue"></td>
                </tr>
                <tr>
                    <td>Cakes</td>
                    <td id="marketreportcakeprice"></td>
                    <td id="marketreportcakeamount"></td>
                    <td id="marketreportcakerevenue"></td>
                </tr>
                <tr>
                    <td colspan="4" id="salestablesummary"></td>
                </tr>
            </table>
            <hr />
            <div class="h2" style="text-align:left">
                <div id="upgradesboughtlistmarketreportdiv">
                    <u>Upgrades Bought:</u>
                    <ul id="upgradesboughtlistmarketreport"></ul>
                    <br />
                </div>
                <div id="upgradesmarketreport" class="h3" style="white-space:pre-line"></div>
            </div>

            <div class="h3" style="text-align:left" id="otherincomesources"></div>
            <hr />
            <input type="button" id="endmarketreportbutton" value="CLOSE REPORT" />
        </div>
    </div>

    <!---------- END OF GAME ---------->
    <div class="state" id="endgame" style="display:none">
        <div class="display-4" style="text-align:center">
            <table align="center" class="h2" border="1px solid black" cellpadding="3%" style="text-align:center" id="endgameleaderboard">
                <tr>
                    <td colspan="5">ALL TIME SALES</td>
                </tr>
                <tr>
                    <th>Bakery</th>
                    <th>Cookies</th>
                    <th>Croissants</th>
                    <th>Cakes</th>
                    <th>Total</th>
                </tr>
            </table> <hr />
            <table align="center" class="h2" border="1px solid black" cellpadding="3%" style="text-align:center" id="annualreport">
                <tr>
                    <td colspan="5">YOUR SALES</td>
                </tr>
                <tr>
                    <th>Round</th>
                    <th>Cookies</th>
                    <th>Croissants</th>
                    <th>Cakes</th>
                    <th>Total</th>
                </tr>
            </table> <hr />
            <input type="button" id="exitgamebutton" value="EXIT" />
        </div>
    </div>

    <script src="~/lib/signalr/dist/browser/signalr.js"></script>
    <script src="~/js/cakery.js"></script>
    <script src="~/js/gamelobby.js"></script>
</div>

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
